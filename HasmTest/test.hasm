@req:r4
@req:s2
@req:d1

# Test addition function, stack and devices.

main:
    # declare values
    mov r0 2
    mov r1 3
    
    # push values
    push r0
    push r1
    
    # call function
    jal f_add
    
    # pop and test result
    pop r0
    assert r0 5
    
    # store on device
    mov d0_0 r0
    
    ret 

f_add:
    pop r3
    pop r2
    add r2 r2 r3
    push r2
    j ra
