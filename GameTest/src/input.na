input_process_key:
    rd  r4   $d_kb
    beq _end r4 $KEY_Q
    
    ; apply movement
    eq  r5  r4  $KEY_RIGHT
    add $px $px r5
    eq  r5  r4  $KEY_LEFT
    sub $px $px r5
    eq  r5  r4  $KEY_UP
    sub $py $py r5
    eq  r5  r4  $KEY_DOWN
    add $py $py r5
    
    ; clamp to borders
    max $px $px 1
    mov r4  $scr_w
    sub r4  r4  2
    min $px $px r4
    max $py $py 1
    mov r4  $scr_h
    sub r4  r4  2
    min $py $py r4
    j   ra
; input_process_key
